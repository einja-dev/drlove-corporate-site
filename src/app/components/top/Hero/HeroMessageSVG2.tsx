'use client';

import { gsap } from 'gsap';
import { type FC, useEffect, useRef } from 'react';

/**
 * ヒーローセクション用のストロークアニメーション SVG コンポーネントだよ☆
 * 必要に応じて stroke 色やタイミングを調整してね♪
 */
export const HeroMessageSVG2: FC<{ animate?: boolean }> = ({ animate }) => {
  const svgRef = useRef<SVGSVGElement | null>(null);

  useEffect(() => {
    if (!svgRef.current || !animate) return;

    // GSAP context で自動クリーンアップ☆
    const ctx = gsap.context(() => {
      // マスク用パスを取得
      const path = svgRef.current!.querySelector<SVGPathElement>('.mask-path');
      if (!path) return;
      const length = path.getTotalLength();
      gsap.set(path, {
        strokeDasharray: length,
        strokeDashoffset: length,
        visibility: 'visible',
      });
      gsap.to(path, {
        strokeDashoffset: 0,
        duration: 2.8,
        ease: 'power3.out',
      });
    }, svgRef);

    return () => ctx.revert();
  }, [animate]);

  return (
    <svg
      ref={svgRef}
      width="974"
      height="432"
      viewBox="0 0 974 432"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      style={{ display: 'block', width: '100%', height: '100%', maxWidth: '100%' }}
    >
      <title>ヒーローメッセージSVGアニメーション</title>
      <mask
        id="mask0_555_1078"
        style={{ maskType: 'alpha' }}
        maskUnits="userSpaceOnUse"
        x={-2}
        y={-7}
        width={979}
        height={445}
      >
        <path
          className="mask-path"
          opacity="0.6"
          d="M23.5407 149.934L5.24072 263.934L54.6407 76.4338C54.6407 76.4338 48.4407 163.234 59.6407 178.534C73.5407 197.434 107.241 196.834 128.641 184.034C150.041 171.234 186.341 134.234 189.441 126.034C192.541 117.834 99.3407 84.5338 99.3407 84.5338C99.3407 84.5338 99.9407 137.334 105.441 139.634C110.941 141.934 135.941 81.9338 135.941 81.9338C135.941 81.9338 143.841 130.034 151.241 130.634C158.641 131.234 211.341 103.034 211.341 103.034C211.341 103.034 205.241 137.934 201.941 139.634C198.641 141.334 219.041 115.134 219.041 115.134C219.041 115.134 238.641 102.234 239.441 100.034C240.241 97.8338 221.941 120.234 221.941 120.234C221.941 120.234 241.741 129.534 247.441 129.634C251.841 129.634 267.441 100.034 267.441 100.034L296.641 77.6338L267.641 115.934C267.641 115.934 302.441 91.7338 303.041 88.9338C303.641 86.0338 289.041 71.4338 289.041 71.4338C289.041 71.4338 277.941 122.234 289.741 119.534C301.541 116.934 303.941 98.9338 306.041 98.5338C308.141 98.1338 315.741 69.8338 315.741 69.8338C315.741 69.8338 333.741 77.7338 333.541 78.9338C333.341 80.0338 319.641 119.534 319.641 119.534C319.641 119.534 331.441 99.4338 336.341 97.6338C341.241 95.8338 353.341 96.7338 354.241 103.034C355.141 109.434 328.741 195.334 314.041 200.134C299.241 205.034 377.341 86.2338 377.341 86.2338C377.341 86.2338 400.241 61.1338 407.241 62.6338C415.341 64.3338 370.041 97.9338 392.241 106.834C414.441 115.734 420.941 81.1338 423.841 74.4338C426.841 67.7338 428.941 101.034 434.141 96.9338C439.341 92.8338 446.241 55.0338 449.341 58.1338C452.441 61.3338 462.841 71.1338 464.741 72.9338C466.641 74.8338 481.441 58.2338 485.841 53.9338C490.241 49.6338 448.041 84.4338 462.441 93.1338C476.841 101.834 491.641 83.3338 496.441 79.0338C499.441 76.3338 524.341 36.9338 529.041 33.0338C533.741 29.1338 522.341 66.9338 527.941 64.5338C533.541 62.1338 538.241 49.3338 541.541 44.5338C544.841 39.7338 565.341 -7.36621 570.241 1.13379C601.341 54.3338 558.741 153.334 527.041 181.034C498.241 206.234 285.341 346.534 291.641 352.334C297.941 358.134 307.741 372.534 315.441 370.534C323.141 368.534 297.941 358.034 301.041 356.334C304.141 354.634 316.441 334.134 324.441 342.334C332.441 350.534 328.841 355.334 327.541 357.434C326.241 359.534 314.841 372.234 314.841 372.234C314.841 372.234 338.641 343.134 342.441 337.934C346.241 332.734 363.941 315.734 369.341 315.334C374.741 314.934 327.141 375.534 330.041 372.334C332.941 369.134 377.641 332.234 380.641 330.934C383.641 329.634 356.641 302.334 360.841 299.134C365.041 295.934 348.941 411.734 350.441 416.734C351.941 421.734 358.641 364.534 353.341 368.234C347.941 371.834 322.841 424.434 305.641 428.834C288.441 433.234 359.841 376.134 356.941 370.534C354.041 364.934 378.941 395.434 411.741 385.834C423.141 382.534 436.741 293.034 442.341 286.934C447.941 280.834 439.541 318.734 443.241 316.034C446.941 313.334 394.441 350.034 399.741 342.734C405.041 335.434 474.941 298.534 485.841 300.634C496.741 302.634 452.241 321.834 450.341 325.134C448.441 328.434 443.141 409.334 405.241 431.034C394.141 437.434 450.341 337.134 455.841 342.634C461.341 348.134 466.041 352.334 457.341 354.934C448.641 357.534 489.441 367.934 491.841 364.134C494.341 360.234 516.541 343.334 515.041 348.634C513.541 353.934 510.841 357.734 509.441 359.234C508.041 360.734 503.641 337.534 503.641 341.734C503.641 345.934 499.341 371.734 497.541 374.934C495.741 378.134 506.341 329.834 509.841 332.734C513.341 335.634 542.741 372.534 544.241 377.134C545.741 381.834 530.941 320.834 534.941 325.734C538.941 330.634 538.441 330.834 538.441 330.834C538.441 330.834 535.141 319.234 536.941 320.634C538.741 322.034 546.041 327.534 546.041 327.534C546.041 327.534 565.141 345.534 564.741 341.134C564.341 336.834 566.241 354.934 567.041 351.334C567.841 347.734 574.741 352.034 574.941 346.234C575.141 340.434 588.141 329.434 588.541 331.734C588.941 334.034 589.341 340.334 587.541 342.634C585.741 344.934 612.441 314.234 613.741 311.434C615.041 308.634 640.641 291.634 643.241 289.534C645.941 287.434 607.141 346.434 605.641 348.134C604.141 349.834 631.341 316.734 643.241 318.334C655.141 319.934 659.441 327.034 655.041 333.534C650.641 340.034 638.241 384.134 627.741 384.534C617.241 384.934 616.641 377.434 619.841 370.734C623.041 364.034 635.141 366.534 638.241 368.834C641.341 371.134 687.541 310.834 692.941 301.434C698.341 292.034 680.441 352.334 700.041 363.034C719.641 373.734 687.941 303.734 695.241 299.134C702.541 294.534 732.541 278.434 736.141 284.734C739.741 291.034 739.741 344.534 734.541 350.534C729.341 356.534 699.841 363.734 702.541 361.434C705.241 359.134 728.441 348.934 731.541 349.734C734.641 350.534 689.141 343.634 692.441 340.134C695.741 336.634 728.141 322.134 736.241 321.434C744.341 320.734 786.041 261.434 786.441 264.934C786.841 268.434 785.641 276.834 786.441 280.034C787.241 283.334 763.941 270.434 765.141 272.734C766.341 275.034 776.241 284.734 779.141 285.734C782.041 286.734 821.541 254.634 818.241 256.434C814.941 258.234 805.541 272.934 802.741 275.434C799.841 277.934 751.941 298.434 756.941 305.534C761.941 312.634 767.441 320.434 770.141 320.934C772.841 321.434 754.441 301.334 759.941 302.334C765.541 303.334 821.941 261.634 844.541 263.934C867.141 266.234 833.241 288.234 824.941 293.334C818.241 297.534 790.441 301.834 782.641 305.634C780.941 306.434 780.141 307.234 780.841 308.034C784.641 312.234 788.341 319.134 790.041 319.734C791.741 320.334 798.541 293.334 799.641 296.934C800.741 300.534 805.341 308.634 802.241 311.034C799.141 313.434 787.341 315.234 789.441 316.334C791.541 317.334 801.041 305.734 799.841 309.234C798.641 312.734 765.341 341.634 767.241 343.934C769.141 346.234 772.841 350.634 775.141 352.134C777.441 353.634 767.341 342.034 769.441 342.634C771.541 343.234 812.841 305.034 823.741 317.434C834.641 329.834 819.241 345.834 816.241 347.934C813.241 349.934 804.841 344.534 802.241 343.434C799.641 342.334 789.541 318.334 791.841 320.934C794.141 323.534 793.941 392.334 791.841 396.134C789.741 399.834 863.541 361.334 866.641 363.134C869.741 364.934 876.341 344.334 883.041 346.834C924.041 366.034 922.941 365.434 922.941 365.434L965.541 358.434L954.841 383.434"
          stroke="#63FC5B"
          strokeWidth={12.8}
          strokeMiterlimit={10}
        />
      </mask>
      <g mask="url(#mask0_555_1078)">
        {/* ここに全てのfill="#262626"のパスを貼り付け */}
        {/* ...省略... */}
      </g>
    </svg>
  );
};
